# Travelunu QA 테스트 시나리오 (Playwright MCP)

> **사용법**: Cursor Composer에서 "docs/qa-test-scenarios.md 시나리오대로 테스트해줘" 요청 시, 이 문서를 참고해 Playwright로 자동 실행합니다.

---

## 전제 조건

| 항목 | 값 |
|------|-----|
| **기본 URL** | `http://localhost:3000` (로컬 개발) 또는 배포 URL |
| **테스트 계정** | Kakao/Google OAuth 필요 시 별도 준비 |
| **사전 준비** | `npm run dev` 실행 중, 브라우저 접근 가능 |

---

## 1. 앱 진입·스플래시

### 시나리오 1-1: 스플래시 후 로그인 화면
1. `/` 접속
2. **확인**: 스플래시(로고 + "함께 만드는 여행 일정") 노출
3. **확인**: 최소 1.5초 후 로그인 화면으로 전환 (비로그인 시)
4. **확인**: "카카오로 로그인", "Google로 로그인" 버튼 존재

### 시나리오 1-2: 로그인 후 홈
1. 이미 로그인된 상태에서 `/` 접속
2. **확인**: "내 여행" 제목의 홈 화면
3. **확인**: 여행 카드 목록 또는 EmptyState("여행을 만들어보세요")

---

## 2. 홈 (HomePage)

### 시나리오 2-1: 여행 생성 (플로우 진입)
1. "여행 만들기" 버튼 클릭
2. **확인**: 여행 생성 시트/위저드 표시
3. 여행 이름 입력 (예: "테스트 여행")
4. 여행지 추가 (예: "후쿠오카")
5. 출발일·귀국일 선택
6. "다음" 또는 "만들기" 클릭
7. **확인**: 생성 완료 토스트, `/trip/{id}`로 이동

### 시나리오 2-2: 여행 카드 탭 → 일정 화면
1. 홈에 여행 카드가 있는 상태
2. 카드 탭
3. **확인**: TravelPlanner(일정 화면)으로 이동
4. **확인**: Day 탭, 일정 목록(또는 빈 상태) 노출

### 시나리오 2-3: 여행 더보기 메뉴
1. 여행 카드 우측 상단 "···" 클릭
2. **확인**: 복제, 공유, 수정, 삭제 항목 표시
3. "수정" 선택 시 여행명·여행지·날짜 편집 가능
4. "삭제" 선택 시 확인 다이얼로그 → 삭제 실행

### 시나리오 2-4: 로그아웃
1. 프로필 영역(우측 상단) 클릭
2. **확인**: 로그아웃 확인 다이얼로그
3. 확인 후 로그인 화면으로 복귀

---

## 3. 일정 화면 (TravelPlanner)

### 시나리오 3-1: Day 탭 전환
1. 여러 Day가 있는 여행 진입
2. Day 1, Day 2 등 탭 클릭
3. **확인**: 선택된 Day의 일정 목록만 표시
4. **확인**: 상단에 해당 Day 이름 표시

### 시나리오 3-2: 빈 Day에 EmptyState
1. 일정이 없는 Day 선택
2. **확인**: "일정 추가 버튼을 눌러 새로운 일정을 추가해보세요" 메시지
3. **확인**: "추가하기" 버튼 존재

---

## 4. 일정 추가 (AddPlacePage)

### 시나리오 4-1: 직접 일정 추가 — 장소 검색
1. "추가하기" → "직접 일정 추가" 선택
2. **확인**: 오른쪽에서 AddPlacePage 슬라이드 인
3. 검색창에 "캐널시티" 입력
4. **확인**: 검색 결과 리스트 표시
5. **확인**: 맵에 마커 표시 (좌표 있는 결과)
6. 검색 결과 하나 클릭
7. **확인**: 폼 모드로 전환 (시간·일정명·카테고리 등)
8. **확인**: 맵이 선택 장소로 이동

### 시나리오 4-2: 시간 선택 — 타임피커 z-index
1. 시나리오 4-1 진행 중, 폼 모드에서 시간 필드(09:00 등) 클릭
2. **확인**: 타임피커 다이얼로그 표시
3. **확인**: 타임피커가 맵에 가리지 않고 최상단에 표시됨
4. 시·분 선택 후 "확인" 클릭
5. **확인**: 선택한 시간이 폼에 반영

### 시나리오 4-3: 직접 입력 (검색 스킵)
1. "추가하기" → "직접 일정 추가"
2. 검색 결과 없을 때 "직접 입력하기" 버튼 클릭
3. **확인**: 폼 모드로 전환 (빈 상태)
4. 시간 선택, 일정명 입력 (예: "테스트 장소")
5. 카테고리 선택 (관광/식사/숙소 등)
6. "추가하기" 클릭
7. **확인**: 일정이 Day에 추가됨, 토스트 "일정이 추가되었습니다"

### 시나리오 4-4: 유효성 검사
1. 직접 입력 모드에서 시간 미입력, 일정명 미입력
2. "추가하기" 클릭
3. **확인**: 토스트 "시간과 일정명을 입력해주세요" (또는 해당 메시지)
4. **확인**: 일정이 추가되지 않음

### 시나리오 4-5: 교통(move) 유형 — 출발/도착역
1. 카테고리에서 "교통" 선택
2. **확인**: 출발역·도착역 필드 표시
3. 출발역 클릭 → 역 선택 또는 주소 입력
4. 도착역 선택
5. **확인**: 일정명이 "출발역 → 도착역" 형태로 자동 채움

---

## 5. 일정 상세 (DetailDialog)

### 시나리오 5-1: 일정 탭 → 상세 열림
1. Day에 일정이 있는 상태
2. 일정 행(PlaceCard) 탭
3. **확인**: DetailDialog 전체화면으로 열림
4. **확인**: 장소명, 평점(있을 경우), 카테고리, 이미지 표시

### 시나리오 5-2: 정보 탭 — 수정 가능 필드
1. 상세 열린 상태, 정보 탭
2. **확인**: 영업시간/체크인·체크아웃, 주소, 가격, 부가정보, 메모 행 표시
3. (편집 가능 시) "이름" 탭 → 수정 모달
4. (편집 가능 시) "주소" 탭 → 장소 검색 다이얼로그
5. (편집 가능 시) "영업시간" 또는 "체크인·체크아웃" 탭 → 편집 모달

### 시나리오 5-3: 체크인·체크아웃 — 타임피커
1. 숙소(stay) 유형 일정 상세
2. "체크인·체크아웃" 행 클릭
3. **확인**: 체크인·체크아웃 편집 모달(CenterPopup)
4. 체크인 시간 버튼 클릭
5. **확인**: 타임피커가 모달 위에 표시(z-index)
6. 시간 변경 후 저장
7. **확인**: 토스트 "체크인·체크아웃이 변경되었습니다"

### 시나리오 5-4: 주소 변경 시 평점 초기화
1. 평점이 있는 장소(예: 캐널시티) 상세
2. "주소" 행 클릭 → 장소 검색
3. 평점 없는 주소(예: 숙소 주소)로 검색하여 선택
4. "확인" 클릭
5. **확인**: 평점이 "평점 없음"으로 표시 (이전 장소 평점 미표시)

### 시나리오 5-5: 주소 변경 — 변경 없이 확인
1. 상세에서 주소 검색 열기
2. 아무것도 변경하지 않고 "확인" 또는 백드롭으로 닫기
3. **확인**: 토스트가 표시되지 않음 (변경 없으면 토스트 없음)

### 시나리오 5-6: 시간 수정
1. 상세 헤더의 시간 뱃지(09:00 등) 클릭
2. **확인**: 타임피커 표시
3. 시간 변경 후 확인
4. **확인**: 토스트 "시간이 변경되었습니다"

### 시나리오 5-7: 길찾기
1. 주소가 있는 일정 상세
2. 하단 "길찾기" 버튼 클릭
3. **확인**: "구글맵으로 이동" 확인 다이얼로그
4. 확인 시 새 탭/창에서 Google Maps 열림

### 시나리오 5-8: 삭제
1. 상세 하단 "삭제" 버튼 클릭
2. **확인**: "이 일정을 삭제하시겠습니까?" 확인 다이얼로그
3. 확인 클릭
4. **확인**: 상세 닫힘, 일정 목록에서 제거
5. **확인**: 토스트 "일정이 삭제되었습니다" + "복구" 버튼 (2.5초 노출)

### 시나리오 5-9: 이미지 — 확대·삭제
1. 상세 상단 이미지 탭
2. **확인**: 이미지 캐러셀 (여러 장일 경우 스와이프)
3. 이미지 클릭
4. **확인**: ImageViewer 전체화면 확대
5. 닫기 후 "이미지 관리" 진입 (있는 경우)
6. **확인**: 삭제/추가 가능

---

## 6. 일괄 삭제

### 시나리오 6-1: 일괄 삭제 모드 진입
1. Day에 일정 2개 이상
2. 일괄 삭제 아이콘(휴지통) 클릭
3. **확인**: 체크박스 모드로 전환
4. **확인**: "취소", "N개 삭제" 버튼 표시

### 시나리오 6-2: 다중 선택 후 삭제
1. 일괄 삭제 모드에서 일정 2개 체크
2. "2개 삭제" 버튼 클릭
3. **확인**: "일정 일괄 삭제" 확인 다이얼로그
4. "삭제" 확인
5. **확인**: 선택한 일정들이 목록에서 제거
6. **확인**: 토스트 "2개 일정이 삭제되었습니다" + "복구"

### 시나리오 6-3: 복구
1. 삭제 직후 토스트의 "복구" 버튼 클릭
2. **확인**: 삭제된 일정들이 다시 목록에 표시

---

## 7. 날짜 관리

### 시나리오 7-1: 날짜 추가
1. "날짜 추가" 버튼(플러스 아이콘) 클릭
2. **확인**: 날짜 추가 시트
3. 출발일·귀국일 선택 (또는 단일 날짜)
4. 확인
5. **확인**: 새 Day 탭 추가

### 시나리오 7-2: 날짜 이름 수정
1. Day 제목(예: "Day 1") 탭
2. **확인**: 날짜 더보기 메뉴 또는 인라인 편집
3. "이름 수정" 선택
4. 새 이름 입력 (예: "오사카") → 저장
5. **확인**: Day 탭 이름 변경

### 시나리오 7-3: 날짜 삭제
1. Day 더보기 메뉴 → "이 날짜 삭제"
2. **확인**: "이 날짜와 포함된 모든 일정이 삭제됩니다" 확인
3. 확인 시 Day 및 해당 일정 삭제

### 시나리오 7-4: Day 순서 변경
1. Day 2개 이상
2. "순서 변경" 버튼(스왑 아이콘) 클릭
3. **확인**: 순서 변경 UI
4. Day 순서 변경 후 확인
5. **확인**: 토스트 "Day 순서가 변경되었습니다"

---

## 8. 붙여넣기·AI

### 시나리오 8-1: 예약 정보 붙여넣기
1. "추가하기" → "예약 정보 붙여넣기"
2. **확인**: PasteInfoPage (텍스트 영역 + 파일 첨부)
3. 예약 확인 메일 텍스트 붙여넣기
4. "분석하기" 클릭
5. **확인**: AI 분석 진행, ImportPreviewDialog에 결과 표시
6. "추가" 또는 "교체" 선택
7. **확인**: 일정이 해당 Day에 반영

### 시나리오 8-2: AI와 대화하며 계획
1. "추가하기" → "AI와 대화하며 계획하기"
2. **확인**: AIChatDialog (채팅 UI)
3. 예: "후쿠오카에서 맛있는 라멘 추천해줘" 입력
4. **확인**: AI 응답 + 추천 일정
5. 추천 일정 "추가" 선택
6. **확인**: 일정이 Day에 추가

---

## 9. 맵·서류·가이드

### 시나리오 9-1: 전체 맵
1. TravelPlanner 하단 FAB(맵 버튼) 클릭
2. **확인**: FullMapDialog 전체화면
3. **확인**: 일정 마커 표시
4. 마커 클릭 시 팝업 또는 장소명

### 시나리오 9-2: 여행 서류
1. 더보기 메뉴(···) → "여행 서류"
2. **확인**: DocumentDialog (항공권, 숙소 등 카테고리)
3. (Supabase 연동 시) 문서 추가/삭제 가능

### 시나리오 9-3: 여행 가이드
1. 더보기 메뉴 → "여행 가이드"
2. **확인**: ShoppingGuideDialog (쇼핑 가이드 등)

---

## 10. 공유·초대

### 시나리오 10-1: 공유 링크 생성
1. 여행 더보기 메뉴 → "공유"
2. **확인**: 공유 링크 복사 또는 네이티브 공유
3. **확인**: 토스트 "공유 링크가 복사되었습니다"

### 시나리오 10-2: 초대 링크 참여
1. `/invite/{shareCode}` 접속 (로그인 상태)
2. **확인**: "여행에 참여하는 중..." 표시
3. **확인**: "여행에 참여했습니다!" 후 `/trip/{id}` 리다이렉트

---

## 11. RAG·주변 장소

### 시나리오 11-1: RAG 장소 일정 추가 (있을 경우)
1. DetailDialog "주변" 탭
2. RAG 추천 장소 중 하나 "일정추가" 클릭
3. **확인**: AddRAGPlaceSheet (프리필 폼, 시간만 선택)
4. 시간 선택 후 확인
5. **확인**: 일정 추가, 토스트

### 시나리오 11-2: 주변 장소 일정 추가
1. 상세 "주변" 탭에서 주변 추천 장소 표시
2. "일정추가" 클릭
3. **확인**: AddNearbyPlaceSheet (시간 선택)
4. 저장 시 extraItems에 추가

---

## 12. 토스트·UX

### 시나리오 12-1: 토스트 표시 시간
1. 어떤 저장/수정 액션 실행
2. **확인**: 토스트 1.5초 후 사라짐 (복구 버튼 없는 경우)
3. 삭제 후 "복구" 토스트
4. **확인**: 2.5초 후 사라짐

### 시나리오 12-2: 변경 없을 때 토스트 미표시
1. DetailDialog에서 주소 검색 열기
2. 아무 변경 없이 "확인"
3. **확인**: 토스트 없음

---

## 13. 반응형·에러

### 시나리오 13-1: Pull to Refresh
1. 홈 또는 일정 화면에서 아래로 당기기
2. **확인**: 새로고침 동작 (로딩 표시)

### 시나리오 13-2: 빈 데이터
1. 여행 없이 홈 접속
2. **확인**: EmptyState, 여행 만들기 유도
3. 일정 없이 Day 선택
4. **확인**: "일정 추가" 유도 메시지

---

## 체크리스트 요약

| 영역 | 핵심 확인 포인트 |
|------|------------------|
| **일정 추가** | 타임피커 맵 위 표시, 검색→폼 전환, 유효성 |
| **상세** | 주소 변경 시 평점 초기화, 체크인·체크아웃 토스트, 변경 없으면 토스트 없음 |
| **삭제** | 단일 삭제 + 복구, 일괄 삭제 + 복구 |
| **토스트** | 1.5초/2.5초(복구 시), 변경 시에만 표시 |
| **공유** | 링크 복사, 초대 참여 |
