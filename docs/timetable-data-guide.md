# 시간표 데이터 추가 가이드

`src/data/timetable.js`의 `TIMETABLE_DB`에 노선을 추가하면, 이동(move) 일정의 **설명(desc)** 과 자동 매칭되어 시간표가 붙습니다.

> **기준 시점·업데이트**  
> 현재 `TIMETABLE_DB`의 열차 시각은 **2026년 2월 기준** 수동 정리 데이터입니다. 노선·시즌·요일에 따라 실제 다이어가 바뀌므로, 공식 JR·사철·버스 사이트 등으로 반드시 확인하는 것을 권장합니다. 정기적으로 데이터를 검토·갱신해야 하며, 장기적으로는 `docs/plan-timetable-data-acquisition.md` 및 `docs/gtfs-timetable-pipeline.md`에 정리된 GTFS 파이프라인 등으로 전환하는 것을 권장합니다.

---

## 1. 용도

- **자동 매칭**: 일정 항목이 `type: "move"`이고 `desc`가 "하카타역 → 구마모토역"처럼 **출발 → 도착** 형태일 때, `label`에 "하카타"와 "구마모토"가 **그 순서로** 포함된 노선을 찾아 `detail.timetable`을 부여합니다.
- **수동 선택**: EditItemDialog에서 "시간표 불러오기" 드롭다운으로 노선을 골라 쓸 수도 있습니다.

---

## 2. 노선 객체 필드

| 필드 | 필수 | 설명 |
|------|------|------|
| `id` | O | 고유 식별자. 영문·숫자·언더스코어 (예: `osaka_kyoto`). |
| `label` | O | **매칭에 사용.** "출발 → 도착 (노선명)" 형태 권장. 한글 출발·도착명이 **순서대로** 들어가야 함. |
| `icon` | - | 아이콘 키 (예: `"car"`). |
| `station` | O | 출발역/정거장 이름 (화면 표시용). |
| `direction` | O | 방면 표시 (예: "구마모토 방면"). |
| `trains` | O | `{ time, name, dest, note? }[]`. `time`은 "HH:MM" 또는 "매 N분" 등. |
| `highlights` | - | 문자열 배열. 꿀팁·주의사항 등. |

---

## 3. 매칭 규칙

- `desc`를 **→, －, to** 등으로 나눠 출발·도착 문자열을 뽑고, 끝의 "역"은 제거합니다.
- `TIMETABLE_DB`에서 **`label`에 출발·도착이 위 순서대로 포함된 첫 노선**을 씁니다.
- 예: desc "오사카역 → 교토역" → 출발 "오사카", 도착 "교토" → `label: "오사카 → 교토 (JR 교토선·쾌속)"` 노선과 매칭.

---

## 4. 새 노선 추가 예시

`TIMETABLE_DB` 배열에 객체를 하나 추가합니다.

```js
{
  id: "shinagawa_shibuya",
  label: "시나가와 → 시부야 (JR 야마노테)",
  icon: "car",
  station: "시나가와역",
  direction: "시부야·신주쿠 방면",
  trains: [
    { time: "08:00", name: "야마노테선", dest: "시부야", note: "약 15분" },
    { time: "08:15", name: "야마노테선", dest: "시부야", note: "약 15분" },
    // ...
  ],
  highlights: [
    "JR 야마노테선. 실제 배차는 JR 동일본 등에서 확인하세요.",
  ],
},
```

- **`label`**: 일정에 "시나가와역 → 시부야역"처럼 적으면 이 노선과 매칭됩니다.
- **`trains`**: `findBestTrain(trains, item.time)`으로 일정 시간에 가까운 편이 추천됩니다. `time`은 "HH:MM" 형식이면 좋고, "매 N분"이면 해당 편은 추천 인덱스에서 제외될 수 있습니다.

---

## 5. 데이터 확보

- **수동 정리**: 홈페이지·안내 PDF·현지 안내판을 보고 위 형식으로 작성.
- **공개 데이터**: GTFS·지자체 오픈데이터를 파싱해 `trains` 배열을 만든 뒤 같은 형식으로 넣기.
- **실제 운행**: 시간표는 노선·시즌에 따라 바뀌므로, 가능하면 공식 JR·사철·버스 사이트 등으로 **반드시 확인**하는 것을 권장합니다.
