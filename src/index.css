@import "tailwindcss";

/* ══ Design System: auto-generated from tokens/ ══ */
/* Run `npm run build:tokens` to regenerate          */
@import "./styles/foundation.css";
@import "./styles/semantic.css";
@import "./styles/semantic-dark.css";
@import "./styles/sizing.css";
@import "./styles/typography.css";

/* ── Tailwind Theme Extension (bridges tokens → Tailwind utilities) ── */
@theme {
  /* Semantic Colors */
  --color-primary: var(--color-primary);
  --color-on-primary: var(--color-on-primary);
  --color-primary-container: var(--color-primary-container);
  --color-secondary: var(--color-secondary);
  --color-on-secondary: var(--color-on-secondary);
  --color-tertiary: var(--color-tertiary);
  --color-error: var(--color-error);
  --color-warning: var(--color-warning);
  --color-success: var(--color-success);
  --color-info: var(--color-info);
  --color-surface: var(--color-surface);
  --color-on-surface: var(--color-on-surface);
  --color-on-surface-variant: var(--color-on-surface-variant);
  --color-surface-dim: var(--color-surface-dim);
  --color-surface-container: var(--color-surface-container);
  --color-outline: var(--color-outline);
  --color-outline-variant: var(--color-outline-variant);
  --color-scrim: var(--color-scrim);

  /* Spacing (from sizing tokens) */
  --spacing-sp20: var(--spacing-sp20);
  --spacing-sp40: var(--spacing-sp40);
  --spacing-sp60: var(--spacing-sp60);
  --spacing-sp80: var(--spacing-sp80);
  --spacing-sp100: var(--spacing-sp100);
  --spacing-sp120: var(--spacing-sp120);
  --spacing-sp160: var(--spacing-sp160);
  --spacing-sp200: var(--spacing-sp200);
  --spacing-sp240: var(--spacing-sp240);
  --spacing-sp320: var(--spacing-sp320);
  --spacing-sp400: var(--spacing-sp400);
  --spacing-sp480: var(--spacing-sp480);

  /* Radius (from sizing tokens) */
  --radius-xs: var(--radius-xsm);
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xlg);
  --radius-full: var(--radius-circle);
}

/* ── Safe area (동적 + 상한: env 값 사용, 다이얼로그 하단 여백 16px로 제한) ── */
:root {
  --safe-area-bottom: min(env(safe-area-inset-bottom, 0px), 16px);
  --safe-area-top: env(safe-area-inset-top, 0px);
}

/* ── Z-Index (modals, viewer) ── */
:root {
  --z-fab: 100;
  --z-dialog: 1000;
  --z-confirm: 5000;
  --z-toast: 6000;
  --z-viewer: 10000; /* 이미지 확대 시 모든 모달 위에 표시 */
}

/* ── Base Styles ── */
body {
  font-family: var(--font-family-base, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif);
  color: var(--color-on-surface);
  background: var(--color-surface);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Hide scrollbar for tab areas */
*::-webkit-scrollbar {
  height: 0;
  width: 0;
}

/* ── Bottom Sheet / Dialog Animations ── */
@keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
@keyframes slideUp { from { transform: translateY(40px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
@keyframes bottomSheetUp { from { transform: translateY(100%) } to { transform: translateY(0) } }

/* Leaflet popup overrides */
.leaflet-popup-content-wrapper {
  border-radius: var(--radius-md) !important;
  box-shadow: 0 4px 16px rgba(0,0,0,0.12) !important;
}
.leaflet-popup-content {
  margin: var(--spacing-sp100) var(--spacing-sp120) !important;
}

/* Day 순서 변경 버튼: 아이콘 가시성 (밝은 배경에서도 잘 보이도록) */
.day-reorder-btn img {
  filter: brightness(0);
  opacity: 0.85;
}

/* 홈 일정 카드 더보기 버튼: 커버 이미지 위일 때 아이콘 흰색 */
[data-cover="true"] button img {
  filter: brightness(0) invert(1);
}

/* ── Skeleton (로딩 스켈레톤) ── */
@keyframes skeletonShimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-surface-container) 0%,
    var(--color-surface-container-low, #e8e8e8) 50%,
    var(--color-surface-container) 100%
  );
  background-size: 200% 100%;
  animation: skeletonShimmer 1.2s ease-in-out infinite;
  border-radius: var(--radius-sm, 4px);
}
